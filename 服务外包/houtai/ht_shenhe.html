<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>会议室管理中心</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="shortcut icon" href="favicon_16.ico"/>
    <!-- <link rel="bookmark" href="favicon_16.ico"/> -->
    <!-- site css -->
    <link rel="stylesheet" href="layui/css/layui.css"  media="all">
    <link rel="stylesheet" href="dist/css/site.min.css">
    <link rel="stylesheet" href="dist/css/me.css">
    <script src="layui/layui.js" charset="utf-8" type="text/javascript"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript" src="dist/js/site.min.js"></script>
    <script type="text/javascript" src="dist/js/houtai.js"></script>
    <script src="dist/js/jquery-3.3.1.min.js"></script>
    <script src="dist/js/vue.min.js"></script>
  </head>

  <body>

  <!-- 顶部导航 -->
  <div class="headerpage"></div>
  <!--顶部导航 over-->

    <!--添加预约弹出框-->
    <div id="mz_add_info" class="me_none" style="padding-right: 45px">
     <form class="layui-form me_margin_top" action="" lay-filter="initForm">
       <div class="layui-form-item">
         <label class="layui-form-label">时间</label>
         <div class="layui-input-block">
           <input type="text" name="username" required  lay-verify="required" placeholder="请输入时间" autocomplete="off" class="layui-input">
         </div>
       </div>
       <div class="layui-form-item">
         <label class="layui-form-label">主题</label>
         <div class="layui-input-block">
           <input type="text" name="username" required  lay-verify="required" placeholder="请输入主题" autocomplete="off" class="layui-input">
         </div>
       </div>
       <div class="layui-form-item">
         <label class="layui-form-label">位置</label>
         <div class="layui-input-inline">
           <input type="text" name="text" required lay-verify="required" placeholder="请输入会议室" autocomplete="off" class="layui-input">
         </div>
         <div class="layui-form-mid layui-word-aux">辅助文字</div>
       </div>
       <div class="layui-form-item">
         <label class="layui-form-label">是否需要服务</label>
         <div class="layui-input-block">
           <select name="city" lay-verify="required">
             <option value=""></option>
             <option value="0">是</option>
             <option value="1">否</option>
           </select>
         </div>
       </div>
       <div class="layui-form-item">
         <label class="layui-form-label">人数</label>
         <div class="layui-input-block">
           <input type="number" name="" required  lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
         </div>
       </div>
       <div class="layui-form-item">
         <label class="layui-form-label">工具</label>
         <div class="layui-input-block">
           <input type="checkbox" name="like[write]" title="投影">
           <input type="checkbox" name="like[read]" title="话筒">
           <input type="checkbox" name="like[dai]" title="打印">
         </div>
       </div>
       <div class="layui-form-item layui-form-text">
         <label class="layui-form-label">其他</label>
         <div class="layui-input-block">
           <textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
         </div>
       </div>
     </form>
    </div>
   <!--申请人信息弹出-->
    <div id="people_detail" class="me_none"  style="margin-left: 45px" >
      <ul id="mz_admin_info">
        <li>
          ID：<span>qq_154678787</span>
        </li>
        <li>姓名：<span>张大山</span></li>
        <li>性别：<span>男</span></li>
        <li>生日：<span>1995-03-08</span></li>
        <li>职位：<span>生活部-部长</span></li>
        <li>联系电话：<span>1008611</span></li>
        <li>邮箱：<span>mingzhi@163.com</span></li>
        <li>参加会议数：<span>10</span></li>
        <li>发起会议数：<span>2</span></li>
        <li>
          简介：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <span class="mz_info_intro" style="margin-right: 8%">
                      就飞快的将疯狂夺金法鸡 就飞快的将疯狂夺金法鸡 就飞快的将疯狂夺金法鸡
                    就飞快的将疯狂夺金法鸡就飞快的将疯狂夺金法鸡就飞快的将疯狂夺金法鸡
                    就飞快的将疯狂夺金法鸡就飞快的将疯狂夺金法鸡就飞快的将疯狂夺金法鸡
                    就飞快的将疯狂夺金法鸡就飞快的将疯狂夺金法鸡就飞快的将疯狂夺金法鸡
                    就飞快的将疯狂夺金法鸡就飞快的将疯狂夺金法鸡就飞快的将疯狂夺金法鸡
                    </span>
        </li>
      </ul>
    </div>


    <div class="container-fluid">
    <!--documents内容-->
      <div class="row row-offcanvas row-offcanvas-left">
          <!--内容左边导航-->
        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" role="navigation">
          <ul class="list-group panel">
            <li class="list-group-item"><i class="glyphicon glyphicon-align-justify"></i> <b>功能</b></li>
            <li class="list-group-item"><input type="text" class="form-control search-query" placeholder="查找功能"></li>
            <li class="active">
              <a href="ht_index.html" class="list-group-item"><i class="glyphicon glyphicon-home"></i>主界面 </a>
            </li>
            <li>
              <a href="#xitong" class="list-group-item " data-toggle="collapse">
                <i class="glyphicon glyphicon-cog"></i>系统管理
                <span class="glyphicon glyphicon-chevron-right"></span>
              </a>
              <div class="collapse" id="xitong">
                <a href="ht_account.html" class="list-group-item">账号管理</a>
                <a href="ht_company.html" class="list-group-item">雇主信息</a>
                <a href="ht_notice.html" class="list-group-item">公告管理</a>
              </div>
            </li>

            <li>
              <a href="#huiyi" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-calendar"></i>会议管理
                <span class="glyphicon glyphicon-chevron-right"></span>
              </a>
              <div class="collapse" id="huiyi">
                <a href="ht_shenhe.html" class="list-group-item">会议审核</a>
                <a href="ht_meet.html" class="list-group-item">会议室管理</a>
                <a href="ht_tag.html" class="list-group-item">会议室标签</a>
              </div>
            </li>
            <li>
              <a href="ht_users.html" class="list-group-item">
                <i class="glyphicon glyphicon-user"></i>成员管理
              </a>
            </li>
            <li>
              <a href="ht_service.html" class="list-group-item">
                <i class="glyphicon glyphicon-flash"></i>客户服务
              </a>
            </li>
            <li>
              <a href="#" class="list-group-item">
                <i class="glyphicon glyphicon-bell"></i>今日详情
              </a>
            </li>
            <li>
              <a href="#" class="list-group-item">
                <i class="glyphicon glyphicon-indent-left"></i>查询分析
              </a>
            </li>
          </ul>
        </div>


          <!--右边内容-->
          <div class="col-xs-12 col-sm-9 content" >

            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title"><a href="javascript:void(0);" class="toggle-sidebar"><span class="fa fa-angle-double-left" data-toggle="offcanvas" title="Maximize Panel"></span></a> 审核预约</h3>
                <!--<a href="#">刷新</a>-->
              </div>
              <div class="panel-body">
                <div class="searchTable" id="app_search"><!--搜索-->
                  按{{way}}搜索：
                  <div class="layui-inline">
                    <input class="layui-input" name="id" id="searchReload" autocomplete="off">
                  </div>
                  <div class="search_way">
                    搜索方式：
                    <select name="city" lay-verify="required" @change="change">
                      <option value="0">按用户名</option>
                      <option value="1">按手机号</option>
                      <option value="2">按邮箱</option>
                      <option value="3">按公司</option>
                    </select>
                  </div>
                  <button class="layui-btn" data-type="reload">搜索</button>
                  <button class="layui-btn me_fr" id="mz_add_meet">添加预约申请</button>
                  <!--<button class="layui-btn me_fr" id="mz_add_meet" data-toggle="modal" data-target="#tableModal">添加会议室</button>-->
                </div>
                <div class="content-row">
                <h5>待审核：</h5>
                <div class="col-md-12">
                  <!-- table-model -->

                  <table class="layui-hide" id="mz_shenhe_table" lay-filter="mz_shenhe_table"></table>
                  <script type="text/html" id="barMeet">
                    <a class="layui-btn layui-btn-xs" lay-event="edit">同意</a>
                    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">拒绝</a>
                  </script>
                </div>

                  <!--隔开-->
                  <div class="col-md-12 mz_shenghe_hr"></div>
                  <hr>
              </div>
                <div class="content-row">
                  <h5>已审核：</h5>
                  <div class="col-md-12">

                    <!-- table-model -->
                    <table class="layui-hide" id="mz_shenghed_table" lay-filter="mz_meet_table"></table>

                    <!--状态template-->
                    <script type="text/html" id="stateTp">
                      {{#  if(d.state =="1"){ }}
                        （已拒绝）
                      {{#  } else { }}
                          （已批准）
                      {{#  } }}
                    </script>
                  </div>
                </div>
              </div><!-- panel body -->
            </div>
        </div><!-- content -->
      </div>
    </div>


    <!--footer-->
   <div class="footerpage"></div>
   <!--footer over-->

   <script>
       $(function(){
           /*公共部分
            * 导航栏
            * footer
            * 侧边栏
            */
           $(".headerpage").load("./page/header.html");
           // $(".leftpage").load("./page/main_left.html");
           $(".footerpage").load("./page/footer.html");
       });


       var vm = new Vue({
           el: '#app_search',
           data:{
               way: '用户名',
               v: 0
           },
           methods:{
               change(select){
                   this.v = select.target.value;
                   if(this.v==0){ this.way='用户名'}
                   if(this.v==1) { this.way = '手机号'}
                   if(this.v==2) { this.way = '邮箱'}
                   if(this.v==3) { this.way = '公司'}
               }
           }
       });



       function show_people(id){
           layui.use('form', function(){
               var form = layui.form;

               form.val("initForm", {
                   // "username": "贤心" // "name": "value"
                   // ,"sex": "女"
                   // ,"password": "123434"
                   // ,"check[write]": true
                   // ,"open": false
                   // ,"desc": "我爱layui"
               })
               //各种基于事件的操作，下面会有进一步介绍
           });
           layer.open({
               type: 1
               ,title: ['发起人信息查看', 'font-size:18px;']
               ,area: ['600px','500px']
               ,id: 'show_people_detail' //设定一个id，防止重复弹出
               // ,btn: ['确定', '取消']
               ,btnAlign: 'c'
               ,moveType: 1 //拖拽模式，0或者1
               ,content: $('#people_detail')
           });
       }
       // 数据表
       layui.use('table', function(){
           var table = layui.table;
           table.render({
               elem: '#mz_shenhe_table'     //未审核
               ,url:'http://localhost:63342/服务外包/houtai/upload/2.json'
               ,title: '未审核数据表'
               ,id:'shenheTable'
               ,cols: [[
                   {type: 'checkbox', fixed: 'left'}
                   ,{field:'id', title:'ID', width:80, fixed: 'left', unresize: true, sort: true}
                   ,{field:'name', title:'申请人', width:80, unresize: true}
                   ,{field:'attendance', title:'人数', width:60, unresize: true}
                   ,{field:'applay_time', title:'提交时间', width:120, unresize: true}
                   ,{field:'useTime', title:'申请时间段', width:120, sort: true, unresize: true}
                   ,{field:'room', title:'申请会议室', width:100, unresize: true}
                   ,{field:'topic', title:'会议主题',width:90, unresize: true}
                   ,{field:'price', title:'费用',width:90, unresize: true}
                   ,{field:'other', title:'其他',width:90, unresize: true}
                   ,{fixed: 'right', title:'操作111', toolbar: '#barMeet', width:115, unresize: true}
               ]]
               ,page: true
           });
           table.render({
               elem: '#mz_shenghed_table'
               ,url:'http://localhost:63342/服务外包/houtai/upload/2.json'
               ,title: '已审核数据表'
               ,id:'shenhedTable'
               ,cols: [[
                   {type: 'checkbox', fixed: 'left'}
                   ,{field:'id', title:'ID', width:80, fixed: 'left', unresize: true, sort: true}
                   ,{field:'name', title:'申请人', width:80, unresize: true,
                       templet: '<div><a href="#" onclick=show_people("{{d.id}}") class="layui-table-link">{{d.name}}</a></div>'}
                   ,{field:'attendance', title:'人数', width:50, unresize: true}
                   ,{field:'applay_time', title:'提交时间', width:120, unresize: true}
                   ,{field:'useTime', title:'申请时间段', width:120, sort: true, unresize: true}
                   ,{field:'room', title:'申请会议室', width:100, unresize: true}
                   ,{field:'topic', title:'会议主题',width:90, unresize: true}
                   ,{field:'price', title:'费用',width:90, unresize: true}
                   ,{field:'other', title:'其他',width:90, unresize: true}
                   ,{field:'state', title: '状态', width: 100, templet: '#stateTp'} //这里的templet值是模板元素的选择器
               ]]
               ,page: true
           });

           //监听行工具事件
           table.on('tool(mz_shenhe_table)', function(obj){
               var data = obj.data;
               //console.log(obj)
               var re;
               if(obj.event === 'del'){

                   layer.prompt({
                       formType: 2,
                       title: '请输入拒绝理由'
                   }, function(value, index){
                       obj.update({

                       });
                       table.reload('shenheTable', {
                           url: 'http://localhost:63342/服务外包/houtai/upload/1.json',
                           page: {
                               curr: 1//重新从第 1 页开始
                           }
                           ,where: {
                               key: {
                                   id: searchReload.val(),
                                   way: searchWay.val()
                               }
                           }
                       });
                       obj.del();
                       layer.close(index);
                   });
               } else if(obj.event === 'edit'){
                   layer.confirm('确认？',function (index) {
                       obj.del();
                       layer.close(index);//关闭弹出层
                   })
               }
           });
           table.on('tool(mz_shenhed_table)', function(obj){
               var data = obj.data;
               //console.log(obj)
               var re;
               if(obj.event === 'del'){

                   // layer.prompt({
                   //     formType: 2,
                   //     title: '请输入拒绝理由',
                   // }, function(value, index){
                   //     obj.update({
                   //
                   //     });
                   //     console.log(value);
                   //     layer.close(index);
                   // });
               } else if(obj.event === 'edit'){
                   layer.confirm('确认？',function (index) {
                       obj.del();
                       layer.close(index);//向服务端发送删除指令
                   })
               }
           });

           //搜索监听，重载
           var $ = layui.$, active = {
               reload: function(){
                   var searchReload = $('#searchReload');
                   var searchWay = $('#mz_search_w');
                   //执行重载
                   table.reload('shenheTable', {
                       url: 'http://localhost:63342/服务外包/houtai/upload/1.json',
                       page: {
                           curr: 1//重新从第 1 页开始
                       }
                       ,where: {
                           key: {
                               id: searchReload.val(),
                               way: searchWay.val()
                           }
                       }
                   });
                   table.reload('shenhedTable', {
                       url: 'http://localhost:63342/服务外包/houtai/upload/1.json',
                       page: {
                           curr: 1//重新从第 1 页开始
                       }
                       ,where: {
                           key: {
                               id: searchReload.val()
                           }
                       }
                   });
               }
           };
           $('.searchTable .layui-btn').on('click', function(){
               var type = $(this).data('type');
               active[type] ? active[type].call(this) : '';
           });
       });


       // 添加会议室
       $('#mz_add_meet').on("click", function () {
           layui.use('form', function(){
               var form = layui.form;

               form.val("initForm", {
                   // "username": "贤心" // "name": "value"
                   // ,"sex": "女"
                   // ,"password": "123434"
                   // ,"check[write]": true
                   // ,"open": false
                   // ,"desc": "我爱layui"
               })
               //各种基于事件的操作，下面会有进一步介绍
           });
           layer.open({
               type: 1
               ,title: "添加预约" //不显示标题栏
               ,closeBtn: true
               ,area: '500px'
               ,id: 'LAY_layuipro' //设定一个id，防止重复弹出
               ,btn: ['确定', '取消']
               ,btnAlign: 'c'
               ,moveType: 1 //拖拽模式，0或者1
               ,content: $('#mz_add_info')
               ,yes:function (index, layero) {
                   console.log(layero);
               }
               ,btn2:function (index, layero) {
                   console.log(1);
               }
           });
       });


       function changeSearchWay() {
           var i =document.getElementById("mz_search_w").value;
           console.log(i)
       }

       $(function () {

       });
   </script>

  </body>
</html>
